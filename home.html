<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Amoqutes - Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
      color: white;
    }
    .uploadBtn {
      position: fixed;
      bottom: 80px;
      right: 20px;
      background: linear-gradient(to right, #ff0080, #ff8c00);
      color: white;
      font-size: 24px;
      border: none;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      box-shadow: 0 0 12px #ff0080;
      cursor: pointer;
    }
    #uploadDialog {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .upload-box {
      background: white;
      color: black;
      padding: 20px;
      border-radius: 16px;
      width: 90%;
      max-width: 400px;
    }
    .hidden { display: none; }
    .bottom-nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #00000080;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      backdrop-filter: blur(10px);
    }
    .bottom-nav button {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
    }
    textarea, input, select {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button.upload {
      background: #302b63;
      color: white;
      padding: 10px;
      width: 100%;
      border-radius: 8px;
      margin-top: 10px;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>  <!-- Upload Button --><button class="uploadBtn" onclick="openUploadDialog()">+</button>

  <!-- Upload Dialog -->  <div id="uploadDialog" class="hidden">
    <div class="upload-box">
      <h3>Upload Content</h3>
      <select id="uploadType" onchange="toggleUploadFields()">
        <option value="">Select Type</option>
        <option value="quote">Quote</option>
        <option value="reel">Reel</option>
      </select><div id="quoteFields" class="hidden">
    <textarea id="quoteText" placeholder="Write your quote..."></textarea>
    <input type="file" id="quoteImage" accept="image/*" />
  </div>

  <div id="reelFields" class="hidden">
    <input type="file" id="reelVideo" accept="video/mp4" />
    <input type="text" id="reelCaption" placeholder="Reel caption" />
  </div>

  <button class="upload" onclick="uploadContent()">Upload</button>
  <button class="upload" onclick="closeUploadDialog()">Cancel</button>
</div>

  </div>  <!-- Bottom Navigation -->  <div class="bottom-nav">
    <button onclick="alert('Home')">üè†</button>
    <button onclick="alert('Reels')">üé•</button>
    <button onclick="alert('Search')">üîç</button>
    <button onclick="alert('Profile')">üë§</button>
  </div>  <!-- Feed Section -->  <div id="feed" style="padding: 80px 20px 100px 20px">
    <h2 style="text-align:center;">Quotes & Reels Feed</h2>
    <div id="contentList"></div>
  </div>  <script type="module">
    import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

    const db = getFirestore();
    const storage = getStorage();
    const auth = getAuth();

    window.uploadContent = async () => {
      const type = document.getElementById("uploadType").value;
      const user = auth.currentUser;
      if (!type || !user) return alert("Select type and login required");

      if (type === "quote") {
        const text = document.getElementById("quoteText").value;
        const image = document.getElementById("quoteImage").files[0];
        let imageUrl = "";

        if (image) {
          const imgRef = ref(storage, `quote_images/${Date.now()}_${image.name}`);
          const snapshot = await uploadBytes(imgRef, image);
          imageUrl = await getDownloadURL(snapshot.ref);
        }

        await addDoc(collection(db, "quotes"), {
          text,
          image: imageUrl,
          uid: user.uid,
          createdAt: new Date()
        });
        alert("‚úÖ Quote uploaded!");
      }

      if (type === "reel") {
        const caption = document.getElementById("reelCaption").value;
        const video = document.getElementById("reelVideo").files[0];
        if (!video) return alert("Select a video");

        const vidRef = ref(storage, `reels/${Date.now()}_${video.name}`);
        const snap = await uploadBytes(vidRef, video);
        const videoUrl = await getDownloadURL(snap.ref);

        await addDoc(collection(db, "reels"), {
          caption,
          videoUrl,
          uid: user.uid,
          createdAt: new Date()
        });

        alert("‚úÖ Reel uploaded!");
      }

      closeUploadDialog();
      loadFeed();
    };

    async function loadFeed() {
      const contentList = document.getElementById("contentList");
      contentList.innerHTML = "";

      const quoteSnap = await getDocs(query(collection(db, "quotes"), orderBy("createdAt", "desc")));
      quoteSnap.forEach(doc => {
        const q = doc.data();
        contentList.innerHTML += `
          <div style="margin-bottom:20px;padding:15px;background:#ffffff10;border-radius:12px;">
            ${q.image ? `<img src="${q.image}" style="max-width:100%;border-radius:10px;" /><br/>` : ''}
            <p style="margin-top:10px;font-size:18px;">${q.text}</p>
          </div>
        `;
      });

      const reelSnap = await getDocs(query(collection(db, "reels"), orderBy("createdAt", "desc")));
      reelSnap.forEach(doc => {
        const r = doc.data();
        contentList.innerHTML += `
          <div style="margin-bottom:20px;padding:15px;background:#ffffff10;border-radius:12px;">
            <video src="${r.videoUrl}" controls style="width:100%;border-radius:10px;"></video>
            <p style="margin-top:10px;font-size:18px;">${r.caption}</p>
          </div>
        `;
      });
    }

    loadFeed();
  </script>  <script>
    function openUploadDialog() {
      document.getElementById('uploadDialog').classList.remove('hidden');
    }
    function closeUploadDialog() {
      document.getElementById('uploadDialog').classList.add('hidden');
    }
    function toggleUploadFields() {
      const type = document.getElementById("uploadType").value;
      document.getElementById("quoteFields").classList.add("hidden");
      document.getElementById("reelFields").classList.add("hidden");
      if (type === "quote") {
        document.getElementById("quoteFields").classList.remove("hidden");
      } else if (type === "reel") {
        document.getElementById("reelFields").classList.remove("hidden");
      }
    }
  </script></body>
</html>
